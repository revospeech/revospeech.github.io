KEEP.initCodeBlockTools=()=>{HTMLElement.prototype.wrap=function(e){this.parentNode.insertBefore(e,this),this.parentNode.removeChild(this),e.appendChild(this)};var e=(KEEP.theme_config?.code_copy||{})["style"],t=(KEEP.theme_config?.code_block||{})["style"],o=(KEEP.theme_config?.code_block?.tools||{})["style"];const l="mac"===(e||t||o||"default"),s=l?"fas fa-chevron-left":"fas fa-chevron-right",{copy:c,copied:d,fold:i,folded:p}=KEEP.language_code_block,f=`<span class="tool fold tooltip" data-content="${i}" data-offset-y="-2px"><i class="fas fa-chevron-down"></i></span>`;document.querySelectorAll("figure.highlight").forEach(n=>{let e=n.classList.length?n.classList[1].toUpperCase():"";"PLAINTEXT"===e&&(e="");var t=document.createElement("div"),o=(t.classList.add("highlight-container"),l&&t.classList.add("mac"),n.wrap(t),e?'<span class="code-lang">'+e+"</span>":"");t.insertAdjacentHTML("afterbegin",`<div class="code-tools-box">
        ${l?f+o:"<span>"+f+o+"</span>"}
        <span class="tool copy tooltip" data-content="${c}" data-offset-y="-2px"><i class="fas fa-copy"></i></span>
      </div>`);const r=n.parentNode.querySelector(".code-tools-box");t=r.querySelector(".copy"),o=r.querySelector(".fold");t.addEventListener("click",e=>{var e=e.currentTarget,t=[...n.querySelectorAll(".code .line")].map(e=>e.innerText).join("\n"),o=document.createElement("textarea"),a=(o.style.top=window.scrollY+"px",o.style.position="absolute",o.style.opacity="0",o.readOnly=!0,o.value=t,document.body.append(o),document.getSelection()),l=0<a.rangeCount&&a.getRangeAt(0),t=(o.select(),o.setSelectionRange(0,t.length),o.readOnly=!1,document.execCommand("copy")),s=e.querySelector("i"),c=r.querySelector(".copy .tooltip-content");t?(s.className="fas fa-check",c&&(c.innerHTML=d)):s.className="fas fa-times",o.blur(),e.blur(),l&&(a.removeAllRanges(),a.addRange(l)),document.body.removeChild(o)}),t.addEventListener("mouseleave",t=>{setTimeout(()=>{t.target.querySelector("i").className="fas fa-copy";var e=r.querySelector(".copy .tooltip-content");e&&(e.innerHTML=c)},500)});let a=!1;o.addEventListener("click",e=>{var e=e.currentTarget.querySelector("i"),t=r.querySelector(".fold .tooltip-content");(a=!a)?(e.className=s,n.classList.add("folded"),r.classList.add("folded"),t&&(t.innerHTML=p)):(e.className="fas fa-chevron-down",n.classList.remove("folded"),r.classList.remove("folded"),t&&(t.innerHTML=i))})})};