function initTOC(){var e=document.querySelector(".post-page-container"),t=document.querySelector(".toc-content-container");KEEP.utils.hasToc?(KEEP.utils={...KEEP.utils,findActiveIndexByTOC(){if(Array.isArray(KEEP.utils.sections)){let e=KEEP.utils.sections.findIndex(e=>e&&0<e.getBoundingClientRect().top-20);-1===e?e=KEEP.utils.sections.length-1:0<e&&e--,this.activateNavByIndex(e)}},registerSidebarTOC(){KEEP.utils.sections=[...document.querySelectorAll(".post-toc li a.nav-link")].map(t=>{const i=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return t.addEventListener("click",e=>{e.preventDefault();e=0===(e=window.scrollY)?-20:e,e=i.getBoundingClientRect().top+e;window.anime({targets:document.scrollingElement,duration:500,easing:"linear",scrollTop:e-10,complete:()=>{history.pushState(null,document.title,t.href),setTimeout(()=>{KEEP.utils.pageTop_dom.classList.add("hide")},150)}})}),i})},activateNavByIndex(t){t=document.querySelectorAll(".post-toc li a.nav-link")[t];if(t&&!t.classList.contains("active-current")){document.querySelectorAll(".post-toc .active").forEach(e=>{e.classList.remove("active","active-current")}),t.classList.add("active","active-current");let e=t.parentNode;for(;!e.matches(".post-toc");)e.matches("li")&&e.classList.add("active"),e=e.parentNode;var i=document.querySelector(".post-toc-wrap");window.anime({targets:i,duration:200,easing:"linear",scrollTop:i.scrollTop-i.offsetHeight/2+t.getBoundingClientRect().top-i.getBoundingClientRect().top})}},handleShowWhenHasToc(){var e=()=>{var e=KEEP.getStyleStatus(),t="isShowToc";e&&e.hasOwnProperty(t)?KEEP.utils.postHelper.hasToc(e[t]):KEEP.utils.postHelper.hasToc(!0)},t="init_open";!KEEP.theme_config.toc.hasOwnProperty(t)||KEEP.theme_config.toc[t]?e():KEEP.utils.postHelper.hasToc(!1)}},KEEP.utils.handleShowWhenHasToc(),KEEP.utils.registerSidebarTOC()):t&&e&&e.removeChild(t)}!0===KEEP.theme_config.pjax.enable&&KEEP.utils?initTOC():window.addEventListener("DOMContentLoaded",initTOC);